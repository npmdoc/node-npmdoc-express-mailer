<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/RGBboy/express-mailer">express-mailer (v0.3.1)</a>
</h1>
<h4>Send Emails from your express application</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-mailer">module express-mailer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-mailer.extend">
            function <span class="apidocSignatureSpan">express-mailer.</span>extend
            <span class="apidocSignatureSpan">(app, options)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-mailer.</span>express_mailer</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-mailer.express_mailer">module express-mailer.express_mailer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-mailer.express_mailer.extend">
            function <span class="apidocSignatureSpan">express-mailer.express_mailer.</span>extend
            <span class="apidocSignatureSpan">(app, options)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-mailer" id="apidoc.module.express-mailer">module express-mailer</a></h1>


    <h2>
        <a href="#apidoc.element.express-mailer.extend" id="apidoc.element.express-mailer.extend">
        function <span class="apidocSignatureSpan">express-mailer.</span>extend
        <span class="apidocSignatureSpan">(app, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (app, options) {

  if (app.mailer) {
    throw new Error('Application already has been extended with Express-Mailer!');
  };

  var mailer = {},
      from = options.from, // sender address
      transportMethod = options.transportMethod || 'SMTP',
      smtpTransport = nodemailer.createTransport(transportMethod, options),
      stubTransport,
      sendMail,
      createRender,
      createSend;

<span class="apidocCodeCommentSpan">  /**
   * .sendMail
   *
   * Renders an enitre email using the given template and locals;
   *
   * @param {String|Object} template|sendOptions
   * @param {Object} locals (template local variables)
   * @param {Object} transport (nodemailer transport)
   * @param {Function} render (app.render or res.render)
   * @param {Function} callback
   * @api private
   */
</span>  sendMail = function (sendOptions, locals, transport, render, callback) {
    var template;
    if (typeof sendOptions === "string") {
      template = sendOptions;
      sendOptions = {};
    } else {
      template = sendOptions.template;
    };

    render(template, locals, function (err, html) {
      if (err) {
        callback(err);
        return;
      };

      sendOptions.from = sendOptions.from || from;
      sendOptions.generateTextFromHTML = true;
      sendOptions.html = html;

      // Taken from NodeMailer (libs/nodemailer.js v0.7.1 line 251)
      var acceptedFields = ['from', 'sender', 'to', 'subject', 'replyTo', 'debug',
          'reply_to', 'cc', 'bcc', 'body', 'text', 'html',
          'envelope', 'inReplyTo', 'references', 'attachments'];

      locals = locals || {};
      for(var i=0;i&lt;acceptedFields.length;i++){
          var field = acceptedFields[i];
          sendOptions[field] = sendOptions[field] || locals[field];
      }

      transport.sendMail(sendOptions, function (err, res) {
        if (err) {
          callback(err);
          return;
        } else {
          callback(null, res.message);
        };
      });
    });
  };

  createRender = function (render) {
    return function (sendOptions, locals, callback) {
      if (!stubTransport) {
        stubTransport = nodemailer.createTransport('Stub', options);
      };
      sendMail(sendOptions, locals, stubTransport, render, callback);
    };
  };

  createSend = function (render) {
    return function (sendOptions, locals, callback) {
      sendMail(sendOptions, locals, smtpTransport, render, callback);
    };
  };

  /**
   * .render
   *
   * Renders an enitre email using the given template and locals;
   *
   * @param {String|Object} template|sendOptions
   * @param {Object} locals (template local variables)
   * @param {Function} callback
   * @api public
   */
   mailer.render = createRender(app.render.bind(app));

  /**
   * .send
   *
   * Sends an email using the given template and locals;
   *
   * @param {String|Object} template|sendOptions
   * @param {Object} locals (template local variables)
   * @param {Function} callback
   * @api public
   */
  mailer.send = createSend(app.render.bind(app));

  /**
   * .update
   *
   * Updates the settings for mailer and callsback when ready;
   *
   * @param {Object} options
   * @param {Function} callback
   * @api public
   */
  mailer.update = function (options, callback) {
    smtpTransport.close(function (err) {
      if (err) {
        callback(err);
        return;
      };
      from = options.from;
      transportMethod = options.transportMethod || 'SMTP';
      smtpTransport = nodemailer.createTransport(transportMethod, options);
      callback(null);
    });
  };

  // Add .mailer to res object
  app.use(function (req, res, next) {
    res.mailer = {
      render: createRender(res.render.bind(res)),
      send: createSend(res.render.bind(res)),
      update: mailer.update
    };
    next();
  });

  app.mailer = mailer;

  return app;

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
// project/app.js

var app = require('express')(),
  mailer = require('express-mailer');

mailer.<span class="apidocCodeKeywordSpan">extend</span>(app, {
from: 'no-reply@example.com',
host: 'smtp.gmail.com', // hostname
secureConnection: true, // use SSL
port: 465, // port for secure SMTP
transportMethod: 'SMTP', // default is SMTP. Accepts anything that nodemailer accepts
auth: {
  user: 'gmail.user@gmail.com',
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-mailer.express_mailer" id="apidoc.module.express-mailer.express_mailer">module express-mailer.express_mailer</a></h1>


    <h2>
        <a href="#apidoc.element.express-mailer.express_mailer.extend" id="apidoc.element.express-mailer.express_mailer.extend">
        function <span class="apidocSignatureSpan">express-mailer.express_mailer.</span>extend
        <span class="apidocSignatureSpan">(app, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (app, options) {

  if (app.mailer) {
    throw new Error('Application already has been extended with Express-Mailer!');
  };

  var mailer = {},
      from = options.from, // sender address
      transportMethod = options.transportMethod || 'SMTP',
      smtpTransport = nodemailer.createTransport(transportMethod, options),
      stubTransport,
      sendMail,
      createRender,
      createSend;

<span class="apidocCodeCommentSpan">  /**
   * .sendMail
   *
   * Renders an enitre email using the given template and locals;
   *
   * @param {String|Object} template|sendOptions
   * @param {Object} locals (template local variables)
   * @param {Object} transport (nodemailer transport)
   * @param {Function} render (app.render or res.render)
   * @param {Function} callback
   * @api private
   */
</span>  sendMail = function (sendOptions, locals, transport, render, callback) {
    var template;
    if (typeof sendOptions === "string") {
      template = sendOptions;
      sendOptions = {};
    } else {
      template = sendOptions.template;
    };

    render(template, locals, function (err, html) {
      if (err) {
        callback(err);
        return;
      };

      sendOptions.from = sendOptions.from || from;
      sendOptions.generateTextFromHTML = true;
      sendOptions.html = html;

      // Taken from NodeMailer (libs/nodemailer.js v0.7.1 line 251)
      var acceptedFields = ['from', 'sender', 'to', 'subject', 'replyTo', 'debug',
          'reply_to', 'cc', 'bcc', 'body', 'text', 'html',
          'envelope', 'inReplyTo', 'references', 'attachments'];

      locals = locals || {};
      for(var i=0;i&lt;acceptedFields.length;i++){
          var field = acceptedFields[i];
          sendOptions[field] = sendOptions[field] || locals[field];
      }

      transport.sendMail(sendOptions, function (err, res) {
        if (err) {
          callback(err);
          return;
        } else {
          callback(null, res.message);
        };
      });
    });
  };

  createRender = function (render) {
    return function (sendOptions, locals, callback) {
      if (!stubTransport) {
        stubTransport = nodemailer.createTransport('Stub', options);
      };
      sendMail(sendOptions, locals, stubTransport, render, callback);
    };
  };

  createSend = function (render) {
    return function (sendOptions, locals, callback) {
      sendMail(sendOptions, locals, smtpTransport, render, callback);
    };
  };

  /**
   * .render
   *
   * Renders an enitre email using the given template and locals;
   *
   * @param {String|Object} template|sendOptions
   * @param {Object} locals (template local variables)
   * @param {Function} callback
   * @api public
   */
   mailer.render = createRender(app.render.bind(app));

  /**
   * .send
   *
   * Sends an email using the given template and locals;
   *
   * @param {String|Object} template|sendOptions
   * @param {Object} locals (template local variables)
   * @param {Function} callback
   * @api public
   */
  mailer.send = createSend(app.render.bind(app));

  /**
   * .update
   *
   * Updates the settings for mailer and callsback when ready;
   *
   * @param {Object} options
   * @param {Function} callback
   * @api public
   */
  mailer.update = function (options, callback) {
    smtpTransport.close(function (err) {
      if (err) {
        callback(err);
        return;
      };
      from = options.from;
      transportMethod = options.transportMethod || 'SMTP';
      smtpTransport = nodemailer.createTransport(transportMethod, options);
      callback(null);
    });
  };

  // Add .mailer to res object
  app.use(function (req, res, next) {
    res.mailer = {
      render: createRender(res.render.bind(res)),
      send: createSend(res.render.bind(res)),
      update: mailer.update
    };
    next();
  });

  app.mailer = mailer;

  return app;

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
// project/app.js

var app = require('express')(),
  mailer = require('express-mailer');

mailer.<span class="apidocCodeKeywordSpan">extend</span>(app, {
from: 'no-reply@example.com',
host: 'smtp.gmail.com', // hostname
secureConnection: true, // use SSL
port: 465, // port for secure SMTP
transportMethod: 'SMTP', // default is SMTP. Accepts anything that nodemailer accepts
auth: {
  user: 'gmail.user@gmail.com',
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>